#!/usr/bin/env python3
import sys
from collections import deque


def solve(N: int, M: int, A: "List[int]", B: "List[int]", X: "List[int]", Y: "List[int]"):

    sets = [set() for _ in range(N)]
    edges = [[] for _ in range(N)]
    for a, b, x, y in zip(A, B, X, Y):
        a -= 1
        b -= 1
        pos_record = (b, x, y)
        if pos_record not in sets[a]:
            sets[a].add(pos_record)
            edges[a].append(pos_record)

        neg_record = (a, -x, -y)
        if neg_record not in sets[b]:
            sets[b].add(neg_record)
            edges[b].append(neg_record)

    pos = [None] * N
    used = [False] * N

    que = deque()
    que.append((0, 0, 0))
    used[0] = True
    pos[0] = [0, 0]

    while que:
        cur, x, y = que.popleft()
        for nxt, dx, dy in edges[cur]:
            if used[nxt]:
                continue
            que.append((nxt, x + dx, y + dy))
            pos[nxt] = [x + dx, y + dy]
            used[nxt] = True

    for p in pos:
        if p is None:
            print("undecidable")
        else:
            print(*p)


# Generated by 2.12.0 https://github.com/kyuridenamida/atcoder-tools  (tips: You use the default template now. You can remove this line by using your custom template)
def main():
    def iterate_tokens():
        for line in sys.stdin:
            for word in line.split():
                yield word
    tokens = iterate_tokens()
    N = int(next(tokens))  # type: int
    M = int(next(tokens))  # type: int
    A = [int()] * (M)  # type: "List[int]"
    B = [int()] * (M)  # type: "List[int]"
    X = [int()] * (M)  # type: "List[int]"
    Y = [int()] * (M)  # type: "List[int]"
    for i in range(M):
        A[i] = int(next(tokens))
        B[i] = int(next(tokens))
        X[i] = int(next(tokens))
        Y[i] = int(next(tokens))
    solve(N, M, A, B, X, Y)

if __name__ == '__main__':
    main()
